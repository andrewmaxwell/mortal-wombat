{"version":3,"file":"static/js/941.3faaee48.chunk.js","mappings":"yKAAO,IAAMA,EAAoB,CAC/BC,QAAS,QACTC,SAAU,OACVC,SAAU,OACVC,cAAe,MACfC,eAAgB,MAChBC,gBAAiB,gDACjBC,cAAe,mDACfC,QAAS,QACTC,OAAQ,MACRC,UAAW,QACXC,UAAW,MACXC,QAAS,KACTC,iBAAkB,MAClBC,UAAW,SACXC,KAAM,IACNC,UAAW,QACXC,UAAW,MACXC,cACE,kFAGSC,EAAmB,CAC9B,EAAG,CACDC,MAAO,QACPC,UAAU,EACVC,QAAQ,EACRC,QAAS,IACTC,GAAI,IACJC,GAAI,IACJC,MAAO,+CACPC,MAAO,QACPC,SAAU,IACVC,MAAO,IACPC,MAAO,kDAET,EAAG,CACDV,MAAO,cACPW,QAAS,KACTV,UAAU,EACVE,QAAS,IACTC,GAAI,IACJC,GAAI,IACJC,MACE,+FACFC,MAAO,OACPK,SAAS,EACTC,UAAW,IACXJ,MAAO,IACPC,MAAO,2DAET,EAAG,CACDV,MAAO,OACPK,GAAI,IACJC,MACE,+FACFC,MAAO,QACPE,MAAO,KAET,EAAG,CACDT,MAAO,MACPW,QAAS,MACTN,GAAI,IACJC,MACE,qFACFQ,aACE,qFACFC,aACE,qFACFC,aACE,qFACFC,aACE,qFACFC,eACE,qFACFX,MAAO,SACPE,MAAO,KAET,EAAG,CACDT,MAAO,SACPW,QAAS,IACTR,QAAS,QACTE,GAAI,IACJC,MACE,qFACFC,MAAO,QACPM,UAAW,KACXM,UAAW,SACXV,MAAO,KAET,EAAG,CACDW,aAAa,EACbpB,MAAO,OACPK,GAAI,IACJC,MAAO,mCACPC,MAAO,QACPE,MAAO,IACPC,MAAO,qDAET,EAAG,CACDV,MAAO,SACPW,QAAS,IACTV,UAAU,EACVoB,UAAW,IACXlB,QAAS,OACTC,GAAI,IACJC,GAAI,IACJC,MACE,+FACFC,MAAO,QACPM,UAAW,KACXM,UAAW,SACXV,MAAO,IACPC,MAAO,iDAET,EAAG,CACDV,MAAO,OACPW,QAAS,OACTN,GAAI,IACJC,MACE,qFACFC,MAAO,QACPM,UAAW,KACXM,UAAW,SACXV,MAAO,KAET,EAAG,CACDT,MAAO,UA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","sources":["defaults.js","hooks/useUserIndex.js","hooks/useCoords.js","hooks/useLocationHash.js","hooks/useCursors.js","Components/common/Pane.js","hooks/useStatePersist.js","Components/ErrorBanner.js","Components/Login.js","Components/Toolbar.js","utils/saveTile.js","utils/timeAgo.js","Components/Cursors.js","Components/GameConfigFields.js","Components/WorldEditor.js","Components/Nav.js","Components/common/FormThing.js","Components/TileTypeEditor.js","Components/GameConfig.js","Components/HereNow.js","Components/MyWorlds.js","utils/worldToCanvas.js","Components/Stats.js","Components/TileLogic.js","Components/App.js","utils/makeButtons.js","hooks/useErrors.js","hooks/useUser.js","hooks/useTileTypes.js","hooks/useWorld.js","editorMain.js","firebase.js","utils.js","utils/getBackground.js","utils/mergeDeepLeft.js"],"sourcesContent":["export const defaultGameConfig = {\n  airDrag: '0.001',\n  digSpeed: '0.05',\n  eatSpeed: '0.05',\n  fallDamageMin: '0.3',\n  fallDamageMult: '100',\n  fallDamageSound: 'https://static.heironimus.info/sound/Thud.ogg',\n  gameOverSound: 'https://static.heironimus.info/sound/YouDead.ogg',\n  gravity: '0.005',\n  health: '100',\n  jumpPower: '0.111',\n  maxHealth: '100',\n  maxPoop: '10',\n  moveDeceleration: '0.2',\n  moveSpeed: '0.0222',\n  poop: '0',\n  swimPower: '0.008',\n  waterDrag: '0.1',\n  backgroundUrl:\n    'https://i.ibb.co/ZLjf3Jb/imgonline-com-ua-Texture-Seamless-ef-Gzuxvyq-GO67.jpg',\n};\n\nexport const defaultTileTypes = {\n  0: {\n    color: 'green',\n    diggable: true,\n    edible: true,\n    healing: '5',\n    hp: '1',\n    id: 'g',\n    image: 'https://art.pixilart.com/sr2601896d34615.png',\n    label: 'grass',\n    makePoop: '1',\n    order: '1',\n    sound: 'https://static.heironimus.info/sound/Chomp.ogg',\n  },\n  1: {\n    color: 'saddleBrown',\n    density: '20',\n    diggable: true,\n    healing: '2',\n    hp: '1',\n    id: 'p',\n    image:\n      'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/b0e07c73f8aa75e.png',\n    label: 'poop',\n    movable: true,\n    moveDelay: '2',\n    order: '2',\n    sound: 'https://static.heironimus.info/sound/SloppyPoopSoft.ogg',\n  },\n  2: {\n    color: 'gray',\n    id: 's',\n    image:\n      'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/0041e8e715b1264.png',\n    label: 'stone',\n    order: '3',\n  },\n  3: {\n    color: 'red',\n    density: '1.1',\n    id: 'w',\n    image:\n      'https://piskel-imgstore-b.appspot.com/img/610cc71e-cdb9-11ec-8e05-2f9ec14027c3.gif',\n    walkingImage:\n      'https://piskel-imgstore-b.appspot.com/img/253fba5c-cdb9-11ec-acf8-2f9ec14027c3.gif',\n    pushingImage:\n      'https://piskel-imgstore-b.appspot.com/img/586bb7e6-cdb9-11ec-a846-2f9ec14027c3.gif',\n    jumpingImage:\n      'https://piskel-imgstore-b.appspot.com/img/4439c4fd-cdb9-11ec-9ce8-2f9ec14027c3.gif',\n    diggingImage:\n      'https://piskel-imgstore-b.appspot.com/img/3a751840-cdb9-11ec-8175-2f9ec14027c3.gif',\n    crouchingImage:\n      'https://piskel-imgstore-b.appspot.com/img/32ac8f9e-cdb9-11ec-9e05-2f9ec14027c3.gif',\n    label: 'wombat',\n    order: '4',\n  },\n  4: {\n    color: 'orange',\n    density: '2',\n    healing: '-0.73',\n    id: 'm',\n    image:\n      'https://piskel-imgstore-b.appspot.com/img/a3591080-d48c-11ec-adf0-83f7175e2efe.gif',\n    label: 'magma',\n    moveDelay: '30',\n    moveStyle: 'liquid',\n    order: '5',\n  },\n  5: {\n    collectible: true,\n    color: 'cyan',\n    id: 'j',\n    image: 'https://i.ibb.co/m6V89v5/gem.gif',\n    label: 'jewel',\n    order: '6',\n    sound: 'https://static.heironimus.info/sound/PinkFast.ogg',\n  },\n  6: {\n    color: 'purple',\n    density: '0',\n    diggable: true,\n    dropsLoot: 'j',\n    healing: '-0.5',\n    hp: '2',\n    id: 'k',\n    image:\n      'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/2b956856674265a.png',\n    label: 'Koala',\n    moveDelay: '25',\n    moveStyle: 'patrol',\n    order: '7',\n    sound: 'https://static.heironimus.info/sound/Hiss.ogg',\n  },\n  7: {\n    color: 'blue',\n    density: '0.85',\n    id: 'a',\n    image:\n      'https://piskel-imgstore-b.appspot.com/img/ffce45fa-d85c-11ec-a908-a90a117b47b4.gif',\n    label: 'water',\n    moveDelay: '15',\n    moveStyle: 'liquid',\n    order: '8',\n  },\n  8: {\n    color: '#f04dd2',\n    density: '10',\n    id: 'o',\n    image:\n      'https://piskel-imgstore-b.appspot.com/img/e92587eb-df95-11ec-b289-d74eb3c6d4e4.gif',\n    label: 'polymer',\n    movable: true,\n    moveDelay: '90',\n    moveStyle: 'liquid',\n    order: '9',\n    sound: 'https://static.heironimus.info/sound/Boing.ogg',\n  },\n  9: {\n    color: 'red',\n    density: '1',\n    hp: '1',\n    id: 'n',\n    image:\n      'https://pixelartmaker-data-78746291193.nyc3.digitaloceanspaces.com/image/6efea72003769ad.png',\n    label: 'NPC',\n    moveDelay: '10',\n    order: '10',\n  },\n  '-1': {\n    color: 'black',\n    id: '_delete',\n    label: 'delete',\n    order: '0',\n  },\n};\n","import {useEffect, useState} from 'react';\nimport {indexBy} from '../utils';\nimport {listen} from '../firebase';\n\nconst indexUsers = (users) => indexBy((u) => u.email, Object.values(users));\n\nexport const useUserIndex = (user, onError) => {\n  const [userIndex, setUserIndex] = useState({});\n  useEffect(\n    () => listen('users', (users) => setUserIndex(indexUsers(users)), onError),\n    [user],\n  );\n  return userIndex;\n};\n","import {useEffect, useState} from 'react';\n\nconst mapping = {\n  KeyS: 'down',\n  KeyA: 'left',\n  KeyW: 'up',\n  KeyD: 'right',\n  ArrowUp: 'up',\n  ArrowDown: 'down',\n  ArrowLeft: 'left',\n  ArrowRight: 'right',\n};\n\nconst MOVE_AMOUNT = 4;\n\nexport const useCoords = (initialX = 0, initialY = 0) => {\n  const [xCoord, setXCoord] = useState(initialX);\n  const [yCoord, setYCoord] = useState(initialY);\n\n  useEffect(() => {\n    const onkeyDown = (e) => {\n      if (e.target !== document.body) return;\n      const dir = mapping[e.code];\n      if (dir === 'up') setYCoord((y) => y - MOVE_AMOUNT);\n      if (dir === 'down') setYCoord((y) => y + MOVE_AMOUNT);\n      if (dir === 'left') setXCoord((x) => x - MOVE_AMOUNT);\n      if (dir === 'right') setXCoord((x) => x + MOVE_AMOUNT);\n    };\n    window.addEventListener('keydown', onkeyDown);\n    return () => {\n      window.removeEventListener('keydown', onkeyDown);\n    };\n  }, []);\n\n  return {xCoord, yCoord, setXCoord, setYCoord};\n};\n","import {useEffect} from 'react';\nimport {debounce, isGuid} from '../utils';\n\nconst setHash = debounce((...args) => {\n  location.hash = args.join('/');\n}, 1000);\n\nexport const useLocationHash = ({\n  worldId,\n  xCoord,\n  yCoord,\n  scale,\n  setWorldId,\n  setXCoord,\n  setYCoord,\n  setScale,\n}) => {\n  useEffect(() => {\n    setHash(worldId, xCoord, yCoord, scale);\n    return setHash.cancel;\n  }, [worldId, scale, xCoord, yCoord]);\n\n  useEffect(() => {\n    const onHashChange = () => {\n      const [id, x, y, sc] = location.hash.slice(1).split('/');\n      if ((!id || isGuid(id)) && [x, y, sc].every((p) => !isNaN(p))) {\n        setWorldId(id);\n        setXCoord(Number(x));\n        setYCoord(Number(y));\n        setScale(Number(sc));\n      } else {\n        console.log('bad hash');\n        location.hash = [worldId || '', xCoord, yCoord, scale].join('/');\n      }\n    };\n    onHashChange();\n    window.addEventListener('hashchange', onHashChange);\n    return () => {\n      window.removeEventListener('hashchange', onHashChange);\n    };\n  }, []);\n};\n","import {serverTimestamp} from 'firebase/database';\nimport {useEffect, useState} from 'react';\nimport {listen, update} from '../firebase';\nimport {guid, throttle} from '../utils';\n\nexport const sessionTimeOut = 15 * 1000;\nexport const sessionId = guid();\n\nexport const getLatestTimestamp = (cursors) => {\n  let latestTimestamp = 0;\n  for (const key in cursors) {\n    latestTimestamp = Math.max(latestTimestamp, cursors[key].tstamp);\n  }\n  return latestTimestamp;\n};\n\nconst cullCursors = (cursors, worldId, onError) => {\n  const culledCursors = {};\n  const latestTimestamp = getLatestTimestamp(cursors);\n  for (const key in cursors) {\n    if (latestTimestamp - cursors[key].tstamp > sessionTimeOut) {\n      culledCursors[`worlds/${worldId}/cursors/${key}`] = null;\n    }\n  }\n  update(culledCursors, onError);\n};\n\nexport const useCursors = (onError, worldId) => {\n  const [cursors, setCursors] = useState({});\n  useEffect(() => {\n    if (worldId) {\n      return listen(`worlds/${worldId}/cursors`, setCursors, onError);\n    }\n  }, [worldId]);\n\n  useEffect(() => {\n    if (Math.random() < 0.01) {\n      cullCursors(cursors, worldId, onError);\n    }\n  }, [cursors, worldId]);\n  return cursors;\n};\n\nexport const setCursor = throttle(\n  (user, mouseX, mouseY, worldId, xCoord, yCoord, scale, onError) => {\n    if (worldId) {\n      update(\n        {\n          [`worlds/${worldId}/cursors/${sessionId}`]: {\n            user: user.email,\n            mouseX,\n            mouseY,\n            left: xCoord - innerWidth / scale / 2,\n            top: yCoord - innerHeight / scale / 2,\n            width: innerWidth / scale,\n            height: innerHeight / scale,\n            tstamp: serverTimestamp(),\n          },\n        },\n        onError,\n      );\n    }\n  },\n  500,\n);\n","import './pane.css';\n\nexport const Pane = ({className, hide, label, children}) => (\n  <div className={`pane ${className}`}>\n    <div className=\"paneHeader\">\n      <a onClick={hide}>\n        <i className=\"fa-solid fa-x\"></i>\n      </a>\n      <strong>{label}</strong>\n    </div>\n    <div className=\"paneBody\">{children}</div>\n  </div>\n);\n","import {useEffect, useState} from 'react';\n\nconst parseJSON = (str, defaultVal) => {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    console.error(e);\n    return defaultVal;\n  }\n};\n\nexport const useStatePersist = (key, initial) => {\n  const [val, setVal] = useState(\n    localStorage[key] === undefined\n      ? initial\n      : parseJSON(localStorage[key], initial),\n  );\n\n  useEffect(() => {\n    localStorage[key] = JSON.stringify(val);\n  }, [val]);\n\n  return [val, setVal];\n};\n","import './errorBanner.css';\n\nexport const ErrorBanner = ({errors, clearError}) =>\n  Object.keys(errors).length > 0 && (\n    <div className=\"errorBanner\">\n      {Object.entries(errors).map(([key, err]) => (\n        <div key={key}>\n          {err} <a onClick={() => clearError(key)}>[x]</a>\n        </div>\n      ))}\n    </div>\n  );\n","import {useState} from 'react';\nimport {logIn} from '../firebase';\nimport './login.css';\n\nexport const Login = ({onError}) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  return (\n    <div style={{width: 300, margin: '50px auto'}}>\n      <form\n        className=\"login\"\n        onSubmit={async (e) => {\n          e.preventDefault();\n          try {\n            await logIn(email, password);\n          } catch (e) {\n            onError(e.message);\n          }\n        }}\n      >\n        {/* <h1>Log In</h1> */}\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button style={{width: '100%'}}>Log In</button>\n      </form>\n\n      {/* <div style={{margin: '30px 0'}}>or</div>\n\n      <form\n        className=\"login\"\n        onSubmit={async (e) => {\n          e.preventDefault();\n          try {\n            await logIn(email, password);\n          } catch (e) {\n            onError(e.message);\n          }\n        }}\n      >\n        <h1>Register</h1>\n        <input\n          type=\"email\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button>Register</button>\n      </form> */}\n    </div>\n  );\n};\n","import {update} from '../firebase';\nimport {getBackground} from '../utils/getBackground';\nimport './toolbar.css';\n\nexport const Toolbar = ({\n  tileTypes,\n  selectedTileTypeId,\n  setSelectedTileTypeId,\n  showTileTypeEditor,\n  setShowTileTypeEditor,\n  worldId,\n}) => {\n  const createTileType = () => {\n    const newKey = Object.values(tileTypes).length.toString();\n    update({\n      [`worlds/${worldId}/tileTypes/${newKey}`]: {order: newKey, id: newKey},\n    });\n    setSelectedTileTypeId(newKey);\n    setShowTileTypeEditor(true);\n  };\n\n  return (\n    <div className=\"toolBar\">\n      <div className=\"tileType\" onClick={() => setSelectedTileTypeId()}>\n        <label>None</label>\n      </div>\n\n      {Object.entries(tileTypes)\n        .sort((a, b) => a[1].order - b[1].order)\n        .map(([key, type]) => (\n          <div\n            key={key}\n            className={\n              'tileType' + (selectedTileTypeId === type.id ? ' selected' : '')\n            }\n            style={{background: getBackground(type)}}\n            title={\n              showTileTypeEditor ? '' : 'Double click to edit tile properties.'\n            }\n            onClick={() => setSelectedTileTypeId(type.id)}\n            onDoubleClick={() => setShowTileTypeEditor(true)}\n          >\n            <label>{type.label}</label>\n          </div>\n        ))}\n      <div className=\"tileType\">\n        <button onClick={createTileType}>\n          <i className=\"fa-solid fa-plus\"></i>\n        </button>\n      </div>\n    </div>\n  );\n};\n","import {getAuth} from 'firebase/auth';\nimport {serverTimestamp} from 'firebase/database';\nimport {update} from '../firebase';\n\nexport const saveTile = (worldId, tile, onError) => {\n  const user = getAuth().currentUser.email;\n  const tstamp = serverTimestamp();\n  return update(\n    {\n      [`worlds/${worldId}/world/${tile.x}_${tile.y}`]:\n        tile.tileType === '_delete' ? null : {...tile, user, tstamp},\n      [`worlds/${worldId}/lastEdited`]: tstamp,\n      [`worlds/${worldId}/lastEditedBy`]: user,\n    },\n    onError,\n  );\n};\n","const times = [\n  {label: 'year', amount: 365 * 24 * 3600 * 1000},\n  {label: 'month', amount: 30 * 24 * 3600 * 1000},\n  {label: 'week', amount: 7 * 24 * 3600 * 1000},\n  {label: 'day', amount: 24 * 3600 * 1000},\n  {label: 'hour', amount: 3600 * 1000},\n  {label: 'minute', amount: 60 * 1000},\n  {label: 'second', amount: 1000},\n];\n\nexport const timeAgo = (ms) => {\n  if (isNaN(ms)) return '???';\n  for (const {label, amount} of times) {\n    if (amount <= ms) {\n      const v = Math.floor(ms / amount);\n      return `${v} ${label}${v === 1 ? '' : 's'} ago`;\n    }\n  }\n  return 'just now';\n};\n","import {Fragment} from 'react';\nimport {\n  getLatestTimestamp,\n  sessionId,\n  sessionTimeOut,\n} from '../hooks/useCursors';\n\nexport const CSS_SIZE = 32;\n\nexport const Cursors = ({cursors, userIndex, scale}) => {\n  const latestTimestamp = getLatestTimestamp(cursors);\n  return Object.entries(cursors).map(\n    ([key, {user, left, top, width, height, tstamp, mouseX, mouseY}]) => {\n      if (key === sessionId || latestTimestamp - tstamp > sessionTimeOut)\n        return null;\n\n      const opacity = 1 - (latestTimestamp - tstamp) / sessionTimeOut;\n      return (\n        <Fragment key={key}>\n          <div\n            className=\"cursorView\"\n            style={{\n              transform: `translate(${left * CSS_SIZE}px, ${top * CSS_SIZE}px)`,\n              width: width * CSS_SIZE,\n              height: height * CSS_SIZE,\n              opacity,\n            }}\n          >\n            <span style={{fontSize: (80 * CSS_SIZE) / scale + '%'}}>\n              {userIndex[user]?.name || user}\n            </span>\n          </div>\n          {mouseX && mouseY ? (\n            <div\n              className=\"mouseCursor\"\n              style={{\n                transform: `translate(${(mouseX + 0.5) * CSS_SIZE}px, ${\n                  (mouseY + 0.5) * CSS_SIZE\n                }px) scale(${CSS_SIZE / scale}) `,\n                opacity,\n              }}\n            >\n              <i className=\"fa-solid fa-arrow-pointer\"></i>\n              <span>{userIndex[user]?.name || user}</span>\n            </div>\n          ) : null}\n        </Fragment>\n      );\n    },\n  );\n};\n","export const gameConfigFields = [\n  {\n    prop: 'digSpeed',\n    label: 'Wombat Digging Speed',\n    type: 'number',\n    info: 'How fast much can you dig in one frame?',\n  },\n  {\n    prop: 'eatSpeed',\n    label: 'Wombat Eating Speed',\n    type: 'number',\n    info: 'How fast much can you eat in one frame?',\n  },\n  {\n    prop: 'gravity',\n    label: 'Gravity',\n    type: 'number',\n    info: 'How strong is gravity?',\n  },\n  {\n    prop: 'health',\n    label: 'Wombat Starting Health',\n    type: 'number',\n    info: 'How much health do you start with?',\n  },\n  {\n    prop: 'maxHealth',\n    label: 'Wombat Max Health',\n    type: 'number',\n    info: 'How much health can you have?',\n  },\n  {\n    prop: 'poop',\n    label: 'Wombat Starting Poop',\n    type: 'number',\n    info: 'How much poop do you start with?',\n  },\n  {\n    prop: 'maxPoop',\n    label: 'Wombat Max Poop',\n    type: 'number',\n    info: 'How much poop can you hold?',\n  },\n  {\n    prop: 'jumpPower',\n    label: 'Wombat Jumping Power',\n    type: 'number',\n    info: 'How much jumping power do you start with?',\n  },\n  {\n    prop: 'moveSpeed',\n    label: 'Wombat Acceleration',\n    type: 'number',\n    info: 'How fast can you move?',\n  },\n  {\n    prop: 'moveDeceleration',\n    label: 'Wombat Deceleration',\n    type: 'number',\n    info: 'How fast can you slow down?',\n  },\n  {\n    prop: 'airDrag',\n    label: 'Air Drag',\n    type: 'number',\n    info: 'How much does the air slow you down?',\n  },\n  {\n    prop: 'fallDamageMin',\n    label: 'Fall Dmg Threshold',\n    type: 'number',\n    info: 'What is the minimum blocks/frame where landing hurts?',\n  },\n  {\n    prop: 'fallDamageMult',\n    label: 'Fall Dmg Multiplier',\n    type: 'number',\n    info: 'This is multiplied by (your speed - Fall Dmg Threshold) when you land to calculate the damage you take.',\n  },\n  {\n    prop: 'fallDamageSound',\n    label: 'Fall Dmg Sound',\n    type: 'text',\n    info: 'The URL for the sound that is played if fall damage occurs.',\n  },\n  {\n    prop: 'swimPower',\n    label: 'Swim Power',\n    type: 'number',\n    info: 'How fast of a swimmer do you start out as?',\n  },\n  {\n    prop: 'waterDrag',\n    label: 'Water Drag',\n    type: 'number',\n    info: 'How quickly does water slow you down?',\n  },\n  {\n    prop: 'gameOverSound',\n    label: 'Game Over Sound',\n    type: 'text',\n    info: 'The URL for the sound that is played when the game is over.',\n  },\n  {\n    prop: 'backgroundUrl',\n    label: 'Background URL',\n    type: 'text',\n    info: 'The URL for the background of the game.',\n    onFieldChange: (value) => {\n      document.body.style.backgroundImage = `url(${value})`;\n    },\n  },\n];\n","import {memo, useCallback, useEffect, useMemo, useRef} from 'react';\nimport {setCursor} from '../hooks/useCursors';\nimport {indexBy, objToArr} from '../utils';\nimport {getBackground} from '../utils/getBackground';\nimport {saveTile} from '../utils/saveTile';\nimport {timeAgo} from '../utils/timeAgo';\nimport {CSS_SIZE, Cursors} from './Cursors';\nimport {gameConfigFields} from './GameConfigFields';\nimport {defaultGameConfig} from '../defaults';\nimport {loadItem} from '../firebase';\nimport './worldEditor.css';\n\nconst getCoords = (e, scale, xCoord, yCoord) => ({\n  x: Math.floor((e.clientX - innerWidth / 2) / scale) + xCoord,\n  y: Math.floor((e.clientY - innerHeight / 2) / scale) + yCoord,\n});\n\nconst getTitle = (user, tstamp, userIndex, x, y) => {\n  if (!user || !tstamp) return '';\n  const name = userIndex[user]?.name || user;\n  return `Placed at (${x}, ${y}) by ${name} ${timeAgo(Date.now() - tstamp)}`;\n};\n\nconst Tiles = ({world, tileTypeIndex, userIndex, setTileLogicCoords}) =>\n  Object.entries(world).map(([key, {x, y, tileType, user, tstamp}]) => (\n    <div\n      key={key}\n      className=\"tile\"\n      title={getTitle(user, tstamp, userIndex, x, y)}\n      style={{\n        transform: `translate(${x * CSS_SIZE}px, ${y * CSS_SIZE}px)`,\n        background: getBackground(tileTypeIndex[tileType]),\n      }}\n      onDoubleClick={() => setTileLogicCoords({x, y})}\n    />\n  ));\n\nconst TilesMemo = memo(Tiles);\n\nexport const WorldEditor = ({\n  world,\n  tileTypes,\n  selectedTileTypeId,\n  onError,\n  worldId,\n  xCoord,\n  yCoord,\n  scale,\n  user,\n  cursors,\n  userIndex,\n  tileLogicCoords,\n  setTileLogicCoords,\n}) => {\n  // using a ref is much more performant than keeping mouse coords in state\n  const ghostRef = useRef();\n\n  const tileTypeIndex = useMemo(\n    () => indexBy((t) => t.id, objToArr(tileTypes)),\n    [tileTypes],\n  );\n\n  // This checks for invalid tiles in the world and outputs them along with an update object\n  // useEffect(() => {\n  //   const badData = Object.entries(world).filter(\n  //     ([, t]) => !tileTypeIndex[t.tileType]\n  //   );\n  //   if (badData.length) {\n  //     console.log(\n  //       'This is bad data',\n  //       badData.map((p) => p[1]),\n  //       JSON.stringify(\n  //         Object.fromEntries(badData.map(([key]) => [`world/${key}`, null]))\n  //       )\n  //     );\n  //   }\n  // }, [world, tileTypeIndex]);\n\n  const onClick = (e) => {\n    const {x, y} = getCoords(e, scale, xCoord, yCoord);\n    if (e.altKey) {\n      window.open(\n        location.href.replace(/\\?.*/, '') +\n          '#' +\n          btoa(JSON.stringify({worldId, x, y})),\n        '_blank',\n      );\n      e.preventDefault();\n      return false;\n    } else {\n      const currentType = world[`${x}_${y}`]?.tileType;\n      const t = e.shiftKey ? '_delete' : selectedTileTypeId;\n      if (t && (currentType || t !== '_delete') && currentType !== t) {\n        saveTile(worldId, {x, y, tileType: t}, onError);\n      }\n    }\n  };\n\n  const onMouseMove = useCallback(\n    (e) => {\n      const {x, y} = getCoords(e, scale, xCoord, yCoord);\n      if (selectedTileTypeId) {\n        const s = ghostRef.current?.style;\n        s.transform = `translate(${x * CSS_SIZE}px, ${y * CSS_SIZE}px)`;\n        if (e.buttons) onClick(e);\n      }\n      setCursor(user, x, y, worldId, xCoord, yCoord, scale, onError);\n    },\n    [scale, worldId, xCoord, yCoord, selectedTileTypeId, user],\n  );\n\n  const cx = innerWidth / 2 - xCoord * CSS_SIZE;\n  const cy = innerHeight / 2 - yCoord * CSS_SIZE;\n\n  // Load and Apply Game Configuration when worldId Changes\n  useEffect(() => {\n    loadItem(`worlds/${worldId}/gameConfig`).then((gameConfigOverrides) => {\n      const gameConfig = {...defaultGameConfig, ...gameConfigOverrides};\n      gameConfigFields\n        .filter((field) => typeof field.onFieldChange === 'function')\n        .forEach((field) => {\n          if (gameConfig[field.prop] != undefined) {\n            field.onFieldChange(gameConfig[field.prop]);\n          }\n        });\n    });\n  }, [worldId]);\n\n  return (\n    <div\n      id=\"worldEditor\"\n      className=\"world\"\n      onClick={onClick}\n      onMouseMove={onMouseMove}\n    >\n      <div\n        style={{\n          transformOrigin: `${innerWidth / 2}px ${innerHeight / 2}px`,\n          transform: `scale(${scale / CSS_SIZE}) translate(${cx}px,${cy}px)`,\n        }}\n      >\n        <Cursors cursors={cursors} userIndex={userIndex} scale={scale} />\n\n        <TilesMemo {...{world, tileTypeIndex, userIndex, setTileLogicCoords}} />\n\n        {selectedTileTypeId && (\n          <div\n            ref={ghostRef}\n            className=\"ghost tile\"\n            style={{\n              background: getBackground(tileTypeIndex[selectedTileTypeId]),\n            }}\n          />\n        )}\n        {tileLogicCoords && (\n          <div\n            style={{\n              transform: `translate(${tileLogicCoords.x * CSS_SIZE}px, ${\n                tileLogicCoords.y * CSS_SIZE\n              }px)`,\n            }}\n            className=\"selected tile\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n","import {logOut} from '../firebase';\nimport packageJSON from '../../package.json';\n\nexport const Nav = ({user, setScale, zoomAmt, userIndex, children}) => (\n  <nav>\n    {user && (\n      <div style={{float: 'right'}}>\n        <a onClick={() => setScale((s) => Math.round(s * zoomAmt))}>\n          <i className=\"fa-solid fa-magnifying-glass-plus\"></i>\n        </a>\n        <a onClick={() => setScale((s) => Math.round(s / zoomAmt))}>\n          <i className=\"fa-solid fa-magnifying-glass-minus\"></i>\n        </a>\n        Hi, {userIndex[user.email]?.name || user.email}!\n        <a onClick={logOut}>log out</a>\n      </div>\n    )}\n    <b>MW Collabitat v{packageJSON.version}</b>\n    {children}\n  </nav>\n);\n","import {lazy, Suspense} from 'react';\n\nconst Editor = lazy(() => import('@monaco-editor/react'));\n\nconst TextField = ({value = '', onChange}) => (\n  <input type=\"text\" value={value} onChange={(e) => onChange(e.target.value)} />\n);\n\nconst NumberField = ({value = '', onChange}) => (\n  <input\n    type=\"number\"\n    value={value}\n    onChange={(e) => onChange(e.target.value)}\n  />\n);\n\nconst Checkbox = ({value = false, onChange}) => (\n  <input\n    type=\"checkbox\"\n    checked={value}\n    onChange={(e) => onChange(e.target.checked)}\n  />\n);\n\nconst Select = ({value, onChange, options}) => (\n  <select value={value} onChange={(e) => onChange(e.target.value)}>\n    <option></option>\n    {options.map(({label, value}) => (\n      <option key={label} value={value}>\n        {label}\n      </option>\n    ))}\n  </select>\n);\n\n// TODO: add code validation\nconst editorOptions = {minimap: {enabled: false}};\nexport const Code = ({value, onChange}) => (\n  <Suspense fallback=\"Loading...\">\n    <Editor\n      height={200}\n      width={800}\n      theme=\"vs-dark\"\n      defaultLanguage=\"javascript\"\n      value={value}\n      onChange={onChange}\n      options={editorOptions}\n    />\n  </Suspense>\n);\n\nconst inputs = {\n  text: TextField,\n  number: NumberField,\n  checkbox: Checkbox,\n  select: Select,\n  code: Code,\n};\n\nexport const FormThing = ({fields, data, defaults, onChange}) =>\n  fields.map(({prop, label, type, info, show, options}) => {\n    if (show && !show(data)) return null;\n    const Field = inputs[type];\n    const value = data?.[prop] === undefined ? defaults?.[prop] : data?.[prop];\n    return (\n      <div key={prop} title={info}>\n        <label>{label}</label>\n        <Field\n          value={value}\n          onChange={(val) => onChange(val, prop)}\n          options={options}\n        />\n\n        {defaults && value !== defaults?.[prop] && (\n          <button\n            onClick={() => onChange(null, prop)}\n            title={`Click to reset ${label} to ${JSON.stringify(\n              defaults?.[prop],\n            )}`}\n          >\n            Reset\n          </button>\n        )}\n      </div>\n    );\n  });\n","import {defaultTileTypes} from '../defaults';\nimport {update} from '../firebase';\nimport {objToArr} from '../utils';\nimport {mergeDeepLeft} from '../utils/mergeDeepLeft';\nimport {FormThing} from './common/FormThing';\nimport './tileTypeEditor.css';\n\n/*\ng: grass\np: poop,\ns: stone,\nw: wombat,\nm: magma,\nj: jewel,\nk: koala,\na: water,\no: polymer\nn: npc\n\n*/\n\nconst capitalize = (str) => str[0].toUpperCase() + str.slice(1);\n\nconst fields = [\n  {\n    prop: 'label',\n    label: 'Label',\n    type: 'text',\n    info: 'The label you see in the tool bar below.',\n  },\n  {\n    prop: 'image',\n    label: 'Image URL',\n    type: 'text',\n    info: `A url to an image.`,\n  },\n  ...['walking', 'pushing', 'jumping', 'digging', 'crouching'].map((n) => ({\n    prop: `${n}Image$`,\n    label: `${capitalize(n)} Image URL`,\n    type: 'text',\n    info: `A url to an image for ${n}.`,\n    show: (data) => data.label === 'wombat' || parseInt(data.moveDelay),\n  })),\n  {\n    prop: 'sound',\n    label: 'Sound URL',\n    type: 'text',\n    info: 'URL for the sound that should be played.',\n  },\n  {\n    prop: 'color',\n    label: 'Color',\n    type: 'text',\n    info: 'The color to use if there is no image',\n  },\n  {\n    prop: 'hp',\n    label: 'HP',\n    type: 'number',\n    info: 'How much health does it have?',\n  },\n  {\n    prop: 'movable',\n    label: 'Movable',\n    type: 'checkbox',\n    info: 'Can you move it?',\n  },\n  {\n    prop: 'moveDelay',\n    label: 'Move Delay',\n    type: 'number',\n    info: 'How many frames does it wait to move? Smaller is faster.',\n  },\n  {\n    prop: 'density',\n    label: 'Density',\n    type: 'number',\n    info: 'Air density is 0. Wombat density is 1. Wombat floats when density is >1, sinks when <1.',\n    show: (data) => parseInt(data.moveDelay),\n  },\n  {\n    prop: 'moveStyle',\n    label: 'Move Style',\n    type: 'select',\n    info: 'How does it move?',\n    options: [\n      {label: 'Liquid', value: 'liquid'},\n      {label: 'Patrol', value: 'patrol'},\n    ],\n    show: (data) => parseInt(data.moveDelay),\n  },\n  {\n    prop: 'healing',\n    label: 'Healing',\n    type: 'number',\n    info: 'How much does it heal (or hurt) when you eat/touch it (per frame)?',\n  },\n  {prop: 'edible', label: 'Edible', type: 'checkbox', info: 'Can you eat it?'},\n  {\n    prop: 'makePoop',\n    label: 'Make Poop',\n    type: 'number',\n    info: 'How much poop does it make?',\n    show: (data) => data.edible,\n  },\n  {\n    prop: 'diggable',\n    label: 'Diggable',\n    type: 'checkbox',\n    info: 'Can you dig it?',\n    show: (data) => !data.edible,\n  },\n  {\n    prop: 'collectible',\n    label: 'Collectible',\n    type: 'checkbox',\n    info: 'Can you collect it?',\n    show: (data) => !data.edible && !data.movable,\n  },\n  {\n    prop: 'dropsLoot',\n    label: 'Drops Loot',\n    type: 'select',\n    info: 'What kind of loot does it drop?',\n    options: [{label: 'Jewel', value: 'j'}],\n    show: (data) => data.diggable && data.hp,\n  },\n  {\n    prop: 'order',\n    label: 'Order',\n    type: 'number',\n    info: 'The order it shows up in the toolbar below',\n  },\n];\n\nconst defaults = fields.reduce((res, {prop, type}) => {\n  res[prop] = type === 'checkbox' ? false : '';\n  return res;\n}, {});\n\nexport const TileTypeEditor = ({\n  selectedTileTypeId,\n  tileTypes,\n  worldId,\n  onError,\n}) => {\n  if (\n    !selectedTileTypeId ||\n    selectedTileTypeId.startsWith('_') ||\n    !Object.values(tileTypes).some((t) => t.id === selectedTileTypeId)\n  )\n    return \"You can't edit this.\";\n\n  const selectedTileType = objToArr(tileTypes).find(\n    (el) => el.id === selectedTileTypeId,\n  );\n\n  const onChange = (value, prop) => {\n    update(\n      {[`worlds/${worldId}/tileTypes/${selectedTileType.key}/${prop}`]: value},\n      onError,\n    );\n  };\n\n  const selectedTileTypeDefaults = Object.values(defaultTileTypes).find(\n    (el) => el.id === selectedTileTypeId,\n  );\n\n  return (\n    selectedTileType && (\n      <div className=\"tileTypeEditor\">\n        <FormThing\n          fields={fields}\n          data={selectedTileType}\n          defaults={\n            selectedTileTypeDefaults &&\n            mergeDeepLeft(selectedTileTypeDefaults, defaults)\n          }\n          onChange={onChange}\n        />\n      </div>\n    )\n  );\n};\n","import {useEffect, useState} from 'react';\nimport {defaultGameConfig} from '../defaults';\nimport {listen, update} from '../firebase';\nimport {FormThing} from './common/FormThing';\nimport {gameConfigFields} from './GameConfigFields';\nimport './gameConfig.css';\n\nconst useConfig = (worldId, onError) => {\n  const [config, setConfig] = useState();\n  useEffect(\n    () => listen(`worlds/${worldId}/gameConfig`, setConfig, onError),\n    [],\n  );\n  return config;\n};\n\nexport const GameConfig = ({worldId, onError}) => {\n  const config = useConfig(worldId, onError);\n\n  const callOnFieldChange = (value, prop) => {\n    const fieldChanged = gameConfigFields.find((field) => field.prop === prop);\n    if (fieldChanged && typeof fieldChanged.onFieldChange === 'function')\n      fieldChanged.onFieldChange(value);\n  };\n\n  const onConfigValueChange = (value, prop) => {\n    update({[`worlds/${worldId}/gameConfig/${prop}`]: value}, onError);\n    callOnFieldChange(value, prop);\n  };\n\n  return (\n    <div className=\"gameConfig\">\n      <FormThing\n        fields={gameConfigFields}\n        data={config}\n        defaults={defaultGameConfig}\n        onChange={onConfigValueChange}\n      />\n    </div>\n  );\n};\n","import {getLatestTimestamp, sessionTimeOut} from '../hooks/useCursors';\n\nexport const HereNow = ({cursors, userIndex, worldId}) => {\n  const latestTimestamp = getLatestTimestamp(cursors);\n  return Object.entries(cursors)\n    .filter((c) => latestTimestamp - c[1].tstamp < sessionTimeOut)\n    .map(([key, {user, mouseX, mouseY}]) => (\n      <div key={key} style={{margin: 5}}>\n        {userIndex[user]?.name || user}\n        {mouseX && mouseY ? (\n          <a\n            style={{margin: '0 10px'}}\n            href={`#${worldId || ''}/${mouseX}/${mouseY}/32`}\n          >\n            go\n          </a>\n        ) : null}\n      </div>\n    ));\n};\n","import {getAuth} from 'firebase/auth';\nimport {serverTimestamp} from 'firebase/database';\nimport {useEffect, useRef, useState} from 'react';\nimport {defaultTileTypes} from '../defaults';\nimport {loadItem, update} from '../firebase';\nimport {guid} from '../utils';\nimport {mergeDeepLeft} from '../utils/mergeDeepLeft';\nimport {timeAgo} from '../utils/timeAgo';\nimport {worldToCanvas} from '../utils/worldToCanvas';\nimport './myWorlds.css';\n\nconst gotoWorld = (id) => {\n  location.hash = `${id}/0/0/32`;\n};\n\nconst createNewWorld = async () => {\n  const worldGuid = guid();\n\n  const worldName = prompt('Enter a name for your new world.');\n  if (!worldName) return;\n\n  await update({\n    [`worlds/${worldGuid}`]: {\n      worldName,\n      lastEdited: serverTimestamp(),\n      lastEditedBy: getAuth().currentUser.email,\n    },\n  });\n\n  gotoWorld(worldGuid);\n};\n\n// collabitat\n\nconst WorldCanvas = ({world, tileTypes}) => {\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    if (world && tileTypes) worldToCanvas(world, tileTypes, canvasRef.current);\n  }, [world, tileTypes]);\n\n  return <canvas ref={canvasRef}></canvas>;\n};\n\nconst WorldItem = ({\n  id,\n  item: {lastEdited, worldName, lastEditedBy, world, tileTypes},\n  userIndex,\n  close,\n}) => (\n  <button\n    className=\"worldButton\"\n    onClick={() => {\n      gotoWorld(id);\n      close();\n    }}\n  >\n    <div className=\"canvasContainer\">\n      <WorldCanvas\n        world={world}\n        tileTypes={mergeDeepLeft(tileTypes, defaultTileTypes)}\n      />{' '}\n    </div>\n    {worldName || '???'}\n    {lastEdited && (\n      <span className=\"lastEdited\">\n        last edited by{' '}\n        {(userIndex[lastEditedBy]?.name || lastEditedBy || '???') +\n          ' ' +\n          timeAgo(Date.now() - lastEdited)}\n      </span>\n    )}\n  </button>\n);\n\nconst loadWorlds = async (setWorlds) => {\n  setWorlds();\n  setWorlds(await loadItem('worlds'));\n};\n\nexport const MyWorlds = ({userIndex, close}) => {\n  const [worlds, setWorlds] = useState();\n\n  useEffect(() => {\n    loadWorlds(setWorlds);\n  }, []);\n\n  return worlds ? (\n    <div className=\"myWorlds\">\n      <div style={{float: 'right'}}>\n        <button\n          onClick={async () => {\n            await createNewWorld();\n            close();\n          }}\n        >\n          <i className=\"fa-solid fa-circle-plus\"></i> Create a New World\n        </button>\n      </div>\n      <button onClick={() => loadWorlds(setWorlds)}>\n        <i className=\"fa-solid fa-arrows-rotate\"></i> Refresh List\n      </button>\n\n      {Object.entries(worlds)\n        .sort((a, b) => b[1].lastEdited - a[1].lastEdited)\n        .map(([key, item]) => (\n          <WorldItem\n            key={key}\n            id={key}\n            item={item}\n            userIndex={userIndex}\n            close={close}\n          />\n        ))}\n    </div>\n  ) : (\n    <div className=\"fa-3x\" style={{textAlign: 'center'}}>\n      <i className=\"fa-solid fa-spinner fa-spin\"></i>\n    </div>\n  );\n};\n","import {indexBy, objToArr} from '../utils';\n\nexport const worldToCanvas = (\n  world,\n  tileTypes,\n  canvas = document.createElement('canvas'),\n) => {\n  const tileTypeIndex = indexBy((t) => t.id, objToArr(tileTypes));\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  for (const key in world) {\n    const {x, y} = world[key];\n    minX = Math.min(minX, x);\n    minY = Math.min(minY, y);\n    maxX = Math.max(maxX, x);\n    maxY = Math.max(maxY, y);\n  }\n  canvas.width = maxX - minX + 1;\n  canvas.height = maxY - minY + 1;\n  const ctx = canvas.getContext('2d');\n  for (const key in world) {\n    const {x, y, tileType} = world[key];\n    ctx.fillStyle = tileTypeIndex[tileType]?.color;\n    ctx.fillRect(x - minX, y - minY, 1, 1);\n  }\n  return canvas;\n};\n","import {memo} from 'react';\nimport {indexBy, objToArr} from '../utils';\nimport {timeAgo} from '../utils/timeAgo';\n\nconst capitalize = (str) => str[0].toUpperCase() + str.slice(1);\n\nconst countBy = (arr, func) =>\n  arr.reduce((res, el) => {\n    const key = func(el);\n    res[key] = (res[key] || 0) + 1;\n    return res;\n  }, {});\n\nconst SubTable = ({heading, data, getLabel}) => (\n  <>\n    <tr>\n      <td>\n        <br />\n      </td>\n    </tr>\n    <tr>\n      <th>{heading}</th>\n    </tr>\n    {Object.entries(data)\n      .sort((a, b) => b[1] - a[1])\n      .map(([key, count]) => (\n        <tr key={key}>\n          <td>{getLabel ? getLabel(key) : key}</td>\n          <td>{count}</td>\n        </tr>\n      ))}\n  </>\n);\n\nconst stats = ({world, tileTypes, userIndex}) => {\n  const tileTypeIndex = indexBy((t) => t.id, objToArr(tileTypes));\n  const tiles = Object.values(world);\n  return (\n    <table>\n      <tbody>\n        <tr>\n          <th>Total Tiles</th>\n          <td>{tiles.length}</td>\n        </tr>\n\n        <SubTable\n          heading=\"By Person\"\n          data={countBy(tiles, (t) => t.user)}\n          getLabel={(key) => capitalize(userIndex[key]?.name || '???')}\n        />\n\n        <SubTable\n          heading=\"By Tile Type\"\n          data={countBy(tiles, (t) => t.tileType)}\n          getLabel={(key) => capitalize(tileTypeIndex[key]?.label || '???')}\n        />\n\n        <SubTable\n          heading=\"By Date\"\n          data={countBy(tiles, (t) =>\n            t.tstamp ? timeAgo(Date.now() - t.tstamp) : '???',\n          )}\n        />\n      </tbody>\n    </table>\n  );\n};\n\nexport const Stats = memo(stats);\n","import {saveTile} from '../utils/saveTile';\nimport {Code, FormThing} from './common/FormThing';\nimport './tileLogic.css';\n\nconst fields = [\n  {\n    prop: 'name',\n    label: 'Name',\n    type: 'text',\n    info: 'Name to use to easily refer to tile.',\n  },\n  {\n    prop: 'onSpace',\n    label: 'On Space',\n    type: 'code',\n    info: 'What should happen when you press space at it?',\n  },\n  {\n    prop: 'onTouch',\n    label: 'On Touch',\n    type: 'code',\n    info: 'What should happen when you collide with this tile?',\n  },\n];\n\nconst examples = `\n// to show the player some text:\nsay('hello!');\n\n// to give the player some choices after their text:\nsay('what do you want to do?');\nchoice('replenish health', () => setHealth(100));\nchoice('lose health', () => setHealth(1));\n\n// to play a sound:\nplaySound('https://static.heironimus.info/sound/PinkFast.ogg');\n\n// to pause the sound:\npauseSound('https://static.heironimus.info/sound/PinkFast.ogg');\n\n// to loop the sound:\nloopSound('https://static.heironimus.info/sound/PinkFast.ogg');\n\n// to jump to a different world:\njumpTo('l36gx6hi:xbmqfbeqyfr');\n// To get a world's id, go to the world in the editor and it's \n// between the # and the first / in the page URL\n\n// to set poop:\nsetPoop(100);\n\n// to set health:\nsetHealth(100);\n\n// to move a tile\nmoveTile(4, -15, 1, 0); // tile x, tile y, move amount x, move amount y\n// this moves the tile at (4, -15) one tile to the right and 0 tiles down.\n\n`.trim();\n\nexport const TileLogic = ({tile, worldId, onError}) => (\n  <div className=\"tileLogic\">\n    <FormThing\n      fields={fields}\n      data={tile}\n      onChange={(value, prop) => {\n        saveTile(worldId, {...tile, [prop]: value}, onError);\n      }}\n    />\n    <details>\n      <summary>Tile Logic Examples</summary>\n      <Code value={examples} />\n    </details>\n  </div>\n);\n","import './App.css';\nimport {useEffect, useState} from 'react';\n\nimport {useErrors} from '../hooks/useErrors';\nimport {useUser} from '../hooks/useUser';\nimport {useUserIndex} from '../hooks/useUserIndex';\nimport {useTileTypes} from '../hooks/useTileTypes';\nimport {useCoords} from '../hooks/useCoords';\nimport {useWorld} from '../hooks/useWorld';\nimport {useLocationHash} from '../hooks/useLocationHash';\nimport {setCursor, useCursors} from '../hooks/useCursors';\n\nimport {Pane} from './common/Pane';\nimport {makeButtons} from '../utils/makeButtons';\n\nimport {ErrorBanner} from './ErrorBanner';\nimport {Login} from './Login';\nimport {Toolbar} from './Toolbar';\nimport {WorldEditor} from './WorldEditor';\nimport {Nav} from './Nav';\nimport {TileTypeEditor} from './TileTypeEditor';\nimport {GameConfig} from './GameConfig';\nimport {HereNow} from './HereNow';\nimport {MyWorlds} from './MyWorlds';\nimport {Stats} from './Stats';\nimport {defaultWorldId} from '../firebase';\nimport {TileLogic} from './TileLogic';\nimport {mergeDeepLeft} from '../utils/mergeDeepLeft';\nimport {defaultTileTypes} from '../defaults';\n\nconst zoomAmt = 2;\n\nconst paneConfigs = [\n  {\n    key: 'instructions',\n    buttonLabel: 'Instructions',\n    paneLabel: 'Instructions',\n    icon: 'circle-question',\n  },\n  {\n    key: 'gameConfig',\n    buttonLabel: 'World Config',\n    paneLabel: 'Config Overrides',\n    icon: 'toolbox',\n  },\n  {\n    key: 'tileTypeEditor',\n    buttonLabel: 'Tile Config',\n    paneLabel: 'Tile Config Overrides',\n    icon: 'gear',\n  },\n  {\n    key: 'hereNow',\n    buttonLabel: 'People',\n    paneLabel: 'Editing Now',\n    icon: 'person',\n  },\n  {\n    key: 'stats',\n    buttonLabel: 'World Stats',\n    paneLabel: 'World Stats',\n    icon: 'gauge',\n  },\n  {\n    key: 'myWorlds',\n    buttonLabel: 'Worlds',\n    paneLabel: 'Worlds',\n    icon: 'earth-americas',\n  },\n];\n\nexport const App = () => {\n  const [errors, onError, clearError] = useErrors();\n\n  // local state\n  const [worldId, setWorldId] = useState(defaultWorldId);\n  const [selectedTileTypeId, setSelectedTileTypeId] = useState();\n  const {xCoord, yCoord, setXCoord, setYCoord} = useCoords(0, 0);\n  const [scale, setScale] = useState(32);\n  const [tileLogicCoords, setTileLogicCoords] = useState();\n\n  // firebase state\n  const user = useUser();\n  const userIndex = useUserIndex(user, onError);\n  const tileTypes = useTileTypes(onError, worldId);\n  const world = useWorld(onError, worldId);\n  const cursors = useCursors(onError, worldId);\n\n  // pane toggles\n  const Panes = makeButtons(paneConfigs);\n\n  useLocationHash({\n    worldId,\n    xCoord,\n    yCoord,\n    scale,\n    setWorldId,\n    setXCoord,\n    setYCoord,\n    setScale,\n  });\n\n  useEffect(() => {\n    if (user)\n      setCursor(user, null, null, worldId, xCoord, yCoord, scale, onError);\n  }, [user, worldId, xCoord, yCoord, scale]);\n\n  const mergedTileTypes = mergeDeepLeft(tileTypes, defaultTileTypes);\n\n  return (\n    <>\n      <Nav {...{user, scale, setScale, zoomAmt, userIndex}}>\n        {Object.values(Panes).map(({button}) => button)}\n      </Nav>\n\n      <ErrorBanner errors={errors} clearError={clearError} />\n\n      {user ? (\n        <div className=\"appContainer\">\n          {Panes.tileTypeEditor.show && (\n            <Pane {...Panes.tileTypeEditor.paneProps}>\n              <TileTypeEditor\n                selectedTileTypeId={selectedTileTypeId}\n                tileTypes={mergedTileTypes}\n                worldId={worldId}\n                onError={onError}\n              />\n            </Pane>\n          )}\n\n          {Panes.gameConfig.show && (\n            <Pane {...Panes.gameConfig.paneProps}>\n              <GameConfig worldId={worldId} onError={onError} />\n            </Pane>\n          )}\n\n          {worldId && Panes.hereNow.show && (\n            <Pane {...Panes.hereNow.paneProps}>\n              <HereNow\n                cursors={cursors}\n                userIndex={userIndex}\n                worldId={worldId}\n              />\n            </Pane>\n          )}\n\n          {Panes.instructions.show && (\n            <Pane {...Panes.instructions.paneProps}>\n              <p>Use the arrow keys or WASD to move around the map.</p>\n              <p>\n                Click a tile type at the bottom. Click on the map to place it.\n              </p>\n              <p>Shift+Click a tile to delete it.</p>\n              <p>\n                You can zoom in and out with{' '}\n                <i className=\"fa-solid fa-magnifying-glass-plus\"></i> and{' '}\n                <i className=\"fa-solid fa-magnifying-glass-minus\"></i> in the\n                upper right.\n              </p>\n              <p>\n                Share your URL with other editors to show them what you made.\n              </p>\n              <p>\n                To test what you have made, Alt+Click where you want to start\n                testing. Share your game URL to share your starting point.\n              </p>\n              <p>\n                Using the None tile-type, double-click on a placed tile to open\n                the script editor.\n              </p>\n            </Pane>\n          )}\n\n          {Panes.myWorlds.show && (\n            <Pane {...Panes.myWorlds.paneProps}>\n              <MyWorlds\n                userIndex={userIndex}\n                close={() => Panes.myWorlds.setShow(false)}\n              />\n            </Pane>\n          )}\n\n          {Panes.stats.show && (\n            <Pane {...Panes.stats.paneProps}>\n              <Stats\n                world={world}\n                tileTypes={mergedTileTypes}\n                userIndex={userIndex}\n              />\n            </Pane>\n          )}\n\n          {tileLogicCoords && (\n            <Pane\n              label={`Tile Logic (${tileLogicCoords.x},${tileLogicCoords.y})`}\n              className=\"tileLogicContainer\"\n              hide={() => setTileLogicCoords()}\n            >\n              <TileLogic\n                tile={world[`${tileLogicCoords.x}_${tileLogicCoords.y}`]}\n                {...{worldId, onError}}\n              />\n            </Pane>\n          )}\n\n          {\n            <div className=\"toolContainer\">\n              <Toolbar\n                {...{\n                  tileTypes: mergedTileTypes,\n                  selectedTileTypeId,\n                  setSelectedTileTypeId,\n                  showTileTypeEditor: Panes.tileTypeEditor.show,\n                  setShowTileTypeEditor: Panes.tileTypeEditor.setShow,\n                  worldId,\n                }}\n              />\n            </div>\n          }\n\n          {worldId && (\n            <div className=\"worldEditorContainer\">\n              <WorldEditor\n                {...{\n                  world,\n                  selectedTileTypeId,\n                  tileTypes: mergedTileTypes,\n                  onError,\n                  worldId,\n                  xCoord,\n                  yCoord,\n                  scale,\n                  user,\n                  cursors,\n                  userIndex,\n                  tileLogicCoords,\n                  setTileLogicCoords,\n                }}\n              />\n            </div>\n          )}\n        </div>\n      ) : (\n        <Login onError={onError} />\n      )}\n    </>\n  );\n};\n","import {useStatePersist} from '../hooks/useStatePersist';\n\nexport const makeButtons = (config) =>\n  Object.fromEntries(\n    config.map(({key, buttonLabel, paneLabel, icon}) => {\n      const [show, setShow] = useStatePersist('show' + buttonLabel, false);\n\n      const button = (\n        <a\n          key={key}\n          className={show ? 'active' : ''}\n          onClick={() => setShow((s) => !s)}\n        >\n          <i className={`fa-solid fa-${icon}`} /> {buttonLabel}\n        </a>\n      );\n\n      const paneProps = {\n        label: paneLabel,\n        className: key + 'Container',\n        hide: () => setShow(false),\n      };\n\n      return [key, {button, show, setShow, paneProps}];\n    }),\n  );\n","import {useState} from 'react';\nimport {dissoc, guid} from '../utils';\n\nexport const useErrors = () => {\n  const [errors, setErrors] = useState({});\n  const onError = (msg) => {\n    setErrors((e) => ({...e, [guid()]: msg}));\n  };\n  const clearError = (key) => setErrors((e) => dissoc(key, e));\n  return [errors, onError, clearError];\n};\n","import {useEffect, useState} from 'react';\nimport {listenUser} from '../firebase';\n\nexport const useUser = () => {\n  const [user, setUser] = useState();\n  useEffect(() => listenUser(setUser), []);\n  return user;\n};\n","import {useEffect, useState} from 'react';\nimport {listen} from '../firebase';\n\nexport const useTileTypes = (onError, worldId) => {\n  const [tileTypes, setTileTypes] = useState();\n\n  useEffect(\n    () => listen(`worlds/${worldId}/tileTypes`, setTileTypes, onError),\n    [worldId],\n  );\n\n  return tileTypes;\n};\n","import {useEffect, useState} from 'react';\nimport {listen} from '../firebase';\n\nexport const useWorld = (onError, worldId) => {\n  const [world, setWorld] = useState({});\n  useEffect(() => {\n    if (worldId) {\n      return listen(`worlds/${worldId}/world`, setWorld, onError);\n    }\n  }, [worldId]);\n  return world;\n};\n","import {StrictMode} from 'react';\nimport {createRoot} from 'react-dom/client';\nimport {App} from './Components/App';\n\ndocument.title = 'Mortal Wombat Editor';\n\ncreateRoot(document.querySelector('#root')).render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n);\n","import {initializeApp} from 'firebase/app';\nimport {\n  ref,\n  getDatabase,\n  update as _update,\n  onValue,\n  off,\n  get,\n  child,\n} from 'firebase/database';\nimport {\n  getAuth,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n  signOut,\n} from 'firebase/auth';\n\ninitializeApp({\n  apiKey: 'AIzaSyBEserPzSUos4MT3XRO8NKAO2oVk1-LS-I',\n  authDomain: 'mortal-wombat-8c76a.firebaseapp.com',\n  projectId: 'mortal-wombat-8c76a',\n  storageBucket: 'mortal-wombat-8c76a.appspot.com',\n  messagingSenderId: '929181149015',\n  appId: '1:929181149015:web:33a7f450bcdbb06ae64012',\n  measurementId: 'G-JL6HCMYYBS',\n});\n\n/*\nData:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/database/mortal-wombat-8c76a-default-rtdb/data\nData Docs: https://firebase.google.com/docs/database/web/read-and-write?hl=en&authuser=0\nList Docs: https://firebase.google.com/docs/database/web/lists-of-data?hl=en&authuser=0\n\nUsers:\nhttps://console.firebase.google.com/project/mortal-wombat-8c76a/authentication/users\nUser Docs: https://firebase.google.com/docs/auth/web/manage-users\n*/\n\nconst db = getDatabase();\nconst auth = getAuth();\nconst dbRef = ref(db);\n\nexport const defaultWorldId = 'l5ybd0mu:2x3xfrsom4h';\n\n// {path1: val1, path2: val2}\nexport const update = (updates, onError) => {\n  try {\n    // console.log('updates', updates);\n    return _update(dbRef, updates);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\nif (location.host === 'localhost:3000') {\n  window._update = async (x) => await _update(dbRef, x);\n}\n\nexport const loadItem = async (key) => (await get(child(dbRef, key))).val();\n\nexport const listen = (pathStr, onChange, onError) => {\n  try {\n    const r = ref(db, pathStr);\n    onValue(r, (snapshot) => onChange(snapshot.val() || {}));\n    return () => off(r);\n  } catch (e) {\n    console.error(e);\n    onError(e.message);\n  }\n};\n\n// export const createUser = async (email, pwd) => {\n//   try {\n//     const result = await createUserWithEmailAndPassword(auth, email, pwd);\n//     return result.user;\n//   } catch (e) {\n//     console.error(e);\n//     return e.message;\n//   }\n// };\n\nexport const logIn = (email, pwd) =>\n  signInWithEmailAndPassword(auth, email, pwd);\n\nexport const listenUser = (onChange) => onAuthStateChanged(auth, onChange);\n\nexport const logOut = () => signOut(auth);\n","// export const assocPath = ([first, ...rest], val, obj) => {\n//   const copy = Array.isArray(obj) ? [...obj] : {...obj};\n//   copy[first] = rest.length ? assocPath(rest, val, copy[first]) : val;\n//   return copy;\n// };\n\nexport const dissoc = (key, obj) => {\n  const copy = {...obj};\n  delete copy[key];\n  return copy;\n};\n\nexport const guid = () =>\n  Date.now().toString(36) + ':' + Math.random().toString(36).slice(2);\n\nexport const isGuid = (str) => /^[0-9a-z]{8,}:[0-9a-z]+$/.test(str);\n\nexport const groupBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) {\n    const key = func(el);\n    (res[key] = res[key] || []).push(el);\n  }\n  return res;\n};\n\nexport const indexBy = (func, arr) => {\n  const res = {};\n  for (const el of arr) res[func(el)] = el;\n  return res;\n};\n\nexport const objToArr = (obj = {}) =>\n  Object.entries(obj).map(([key, el]) => ({key, ...el}));\n\nexport const debounce = (func, delay) => {\n  let timeout;\n  const f = (...args) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func(...args), delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\nexport const throttle = (func, delay) => {\n  let timeout;\n  let running = false;\n  let runAgainArgs;\n  const f = (...args) => {\n    if (running) {\n      runAgainArgs = args;\n      return;\n    }\n    running = true;\n    timeout = setTimeout(() => {\n      func(...args);\n      running = false;\n      if (runAgainArgs) {\n        f(...runAgainArgs);\n      }\n      runAgainArgs = undefined;\n    }, delay);\n  };\n  f.cancel = () => clearTimeout(timeout);\n  return f;\n};\n\n// const memoize = (func) => {\n//   const cache = {};\n//   return (...args) => {\n//     const key = JSON.stringify(args);\n//     if (cache[key] === undefined) cache[key] = func(...args);\n//     return cache[key];\n//   };\n// };\n","export const getBackground = (type, prop = 'image') => {\n  const url = type?.[prop] || type?.image;\n  return url ? `no-repeat center/contain url(${url})` : type?.color;\n};\n","export const mergeDeepLeft = (a, b) => {\n  if (a === undefined) return b;\n  if (b === undefined) return a;\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const result = {};\n    for (const key in {...a, ...b}) {\n      result[key] = mergeDeepLeft(a[key], b[key]);\n    }\n    return result;\n  }\n  return a;\n};\n"],"names":["defaultGameConfig","airDrag","digSpeed","eatSpeed","fallDamageMin","fallDamageMult","fallDamageSound","gameOverSound","gravity","health","jumpPower","maxHealth","maxPoop","moveDeceleration","moveSpeed","poop","swimPower","waterDrag","backgroundUrl","defaultTileTypes","color","diggable","edible","healing","hp","id","image","label","makePoop","order","sound","density","movable","moveDelay","walkingImage","pushingImage","jumpingImage","diggingImage","crouchingImage","moveStyle","collectible","dropsLoot","useUserIndex","user","onError","useState","userIndex","setUserIndex","useEffect","listen","users","indexBy","u","email","Object","values","indexUsers","mapping","KeyS","KeyA","KeyW","KeyD","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","setHash","debounce","args","location","hash","join","sessionTimeOut","sessionId","guid","getLatestTimestamp","cursors","latestTimestamp","key","Math","max","tstamp","useCursors","worldId","setCursors","random","culledCursors","update","cullCursors","setCursor","throttle","mouseX","mouseY","xCoord","yCoord","scale","left","innerWidth","top","innerHeight","width","height","serverTimestamp","Pane","className","hide","children","onClick","useStatePersist","initial","undefined","localStorage","str","defaultVal","JSON","parse","e","console","error","parseJSON","val","setVal","stringify","ErrorBanner","errors","clearError","keys","length","entries","map","err","Login","setEmail","password","setPassword","style","margin","onSubmit","preventDefault","logIn","message","type","placeholder","value","onChange","target","Toolbar","tileTypes","selectedTileTypeId","setSelectedTileTypeId","showTileTypeEditor","setShowTileTypeEditor","sort","a","b","background","getBackground","title","onDoubleClick","newKey","toString","saveTile","tile","getAuth","currentUser","x","y","tileType","times","amount","timeAgo","ms","isNaN","v","floor","CSS_SIZE","Cursors","opacity","Fragment","transform","fontSize","name","gameConfigFields","prop","info","onFieldChange","document","body","backgroundImage","getCoords","clientX","clientY","getTitle","Date","now","Tiles","world","tileTypeIndex","setTileLogicCoords","TilesMemo","memo","WorldEditor","tileLogicCoords","ghostRef","useRef","useMemo","t","objToArr","altKey","window","open","href","replace","btoa","currentType","shiftKey","onMouseMove","useCallback","current","buttons","cx","cy","loadItem","then","gameConfigOverrides","gameConfig","field","forEach","transformOrigin","ref","Nav","setScale","zoomAmt","float","s","round","logOut","packageJSON","Editor","lazy","editorOptions","minimap","enabled","Code","Suspense","fallback","theme","defaultLanguage","options","inputs","text","number","checkbox","checked","select","code","FormThing","fields","data","defaults","show","Field","n","toUpperCase","slice","parseInt","reduce","res","TileTypeEditor","startsWith","some","selectedTileType","find","el","selectedTileTypeDefaults","mergeDeepLeft","GameConfig","config","setConfig","useConfig","fieldChanged","callOnFieldChange","HereNow","filter","c","gotoWorld","createNewWorld","worldGuid","worldName","prompt","lastEdited","lastEditedBy","WorldCanvas","canvasRef","canvas","createElement","minX","Infinity","minY","maxX","maxY","min","ctx","getContext","fillStyle","fillRect","worldToCanvas","WorldItem","item","close","loadWorlds","setWorlds","MyWorlds","worlds","textAlign","capitalize","countBy","arr","func","SubTable","heading","getLabel","count","stats","tiles","Stats","examples","trim","TileLogic","paneConfigs","buttonLabel","paneLabel","icon","App","setErrors","msg","dissoc","useErrors","defaultWorldId","setWorldId","initialX","initialY","setXCoord","setYCoord","onkeyDown","dir","addEventListener","removeEventListener","useCoords","setUser","listenUser","useUser","setTileTypes","useTileTypes","setWorld","useWorld","Panes","fromEntries","setShow","paneProps","button","cancel","onHashChange","split","sc","isGuid","every","p","log","Number","useLocationHash","mergedTileTypes","tileTypeEditor","hereNow","instructions","myWorlds","createRoot","querySelector","render","StrictMode","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getDatabase","auth","dbRef","updates","_update","host","get","child","pathStr","r","onValue","snapshot","off","pwd","signInWithEmailAndPassword","onAuthStateChanged","signOut","obj","copy","test","delay","timeout","f","clearTimeout","setTimeout","runAgainArgs","running","url","result"],"sourceRoot":""}